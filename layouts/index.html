{{ define "main" }}
  <article class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy nested-links {{ $.Param "text_color" | compare.Default "mid-gray" }}">
    {{ .Content }}
  </article>

  {{/* Define a section to pull recent posts from. For Hugo 0.20 this will default to the section with the most number of pages. */}}
  {{ $mainSections := site.Params.mainSections | compare.Default (collections.Slice "post") }}
  {{ $section := collections.Where $.Site.RegularPages "Section" "in" $mainSections }}
  {{ $section_count := len $section }}

  {{ if compare.Ge $section_count 1 }}
    <div class="pa3 pa4-ns w-100 w-70-ns center">
      <section class="w-100 mw8">
        <h2 class="f3 fw4 mb4">Recent Posts</h2>
        {{/* Range through all posts showing only title, date, and tags */}}
        {{ range $section }}
          <article class="bb b--black-10 pb3 mb3">
            <h3 class="f4 fw6 mt0 mb2">
              <a href="{{ .RelPermalink }}" class="link dark-gray dim">
                {{ .Title }}
              </a>
            </h3>
            <div class="f6 gray mb2">
              <time>{{ .Date.Format "January 2, 2006" }}</time>
            </div>
            {{ if .Params.tags }}
              <div class="f7 mb2">
                {{ range .Params.tags }}
                  <span class="dib bg-light-gray br2 ph2 pv1 mr2 mb1 dark-gray">{{ . }}</span>
                {{ end }}
              </div>
            {{ end }}
          </article>
        {{ end }}
      </section>
    </div>
  {{ end }}
{{ end }}